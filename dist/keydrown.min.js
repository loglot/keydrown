/*! keydrown - v1.2.8 - 2025-02-20 - http://jeremyckahn.github.com/keydrown */
(o=>{e=(n={forEach:function(n,e){for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)}}).forEach,n.getTranspose=function(n){var t={};return e(n,function(n,e){t[n]=e}),t},n.indexOf=function(n,e){if(n.indexOf)return n.indexOf(e);for(var t=n.length,o=0;o<t;o++)if(n[o]===e)return o;return-1},t=n.indexOf,n.pushUnique=function(n,e){return-1===t(n,e)&&(n.push(e),!0)},n.removeValue=function(n,e){e=t(n,e);if(-1!==e)return n.splice(e,1)[0]},n.documentOn=function(n,e){o.addEventListener?o.addEventListener(n,e,!1):document.attachEvent&&document.attachEvent("on"+n,e)},n.requestAnimationFrame=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||function(n){o.setTimeout(n,1e3/60)},n.noop=function(){};var e,t,r=n,n={ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,SHIFT:16,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,DELETE:46,TAB:9,TILDE:192,CTRL:17},i=r.getTranspose(n),u=[],s=(p.prototype._downHandler=r.noop,p.prototype._upHandler=r.noop,p.prototype._pressHandler=r.noop,p.prototype.isDown=function(){return-1!==r.indexOf(u,this.keyCode)},p.prototype.justPressed=function(){return-1!==r.indexOf(u,this.keyCode)?!p.pressed&&(p.pressed=!0):p.pressed=!1},p.prototype.down=function(n){c(this,"_downHandler",n,this.cachedKeypressEvent)},p.prototype.up=function(n,e){c(this,"_upHandler",n,e)},p.prototype.press=function(n,e){this.cachedKeypressEvent=e,c(this,"_pressHandler",n,e)},p.prototype.unbindDown=function(){this._downHandler=r.noop},p.prototype.unbindUp=function(){this._upHandler=r.noop},p.prototype.unbindPress=function(){this._pressHandler=r.noop},p);function p(n){this.keyCode=n,this.cachedKeypressEvent=null}function c(n,e,t,o){t?n[e]=t:n[e](o)}d=u,(f={}).Key=s,a=!1,E=Date.now||function(){return+new Date},h=E(),f.tick=function(){for(var n=d.length,e=0;e<n;e++){var t=d[e],t=i[t];t&&f[t].down()}},f.run=function(n){a=!0;var e=E(),t=e-h;r.requestAnimationFrame.call(o,function(){a&&(f.run(n),n(t,e))}),h=e},f.stop=function(){a=!1},r.forEach(n,function(n,e){f[e]=new s(n)}),r.documentOn("keydown",function(n){var e,t=n.keyCode,o=i[t],t=r.pushUnique(d,t),o=f[o];o&&(t=!!((e=o.cachedKeypressEvent||{}).ctrlKey||e.shiftKey||e.metaKey)||t)&&o.press(null,n)}),r.documentOn("keyup",function(n){var e=r.removeValue(d,n.keyCode),e=i[e];e&&f[e].up(null,n)}),r.documentOn("blur",function(n){r.forEach(d,function(n){n=i[n];n&&f[n].up()}),d.length=0});var d,f,a,E,h,y=f;"object"==typeof module&&"object"==typeof module.exports?module.exports=y:"function"==typeof define&&define.amd?define(function(){return y}):o.kd=y})(window);